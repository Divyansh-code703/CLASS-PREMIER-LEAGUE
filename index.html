  
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Class Premier League - Phase 3</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- LOGIN SCREEN -->
  <div id="login-screen" class="screen active">
    <img src="IMG-20251107-WA0004(1).jpg" class="logo" alt="CPL Logo" />
    <h1>Class Premier League</h1>
    <input type="text" id="name" placeholder="Enter Your Name" />
    <input type="email" id="email" placeholder="Enter Email" />
    <input type="password" id="password" placeholder="Enter Password" />
    <div class="btns">
      <button id="loginBtn">Login</button>
      <button id="signupBtn" class="secondary">Sign Up</button>
    </div>
    <p id="login-message"></p>
  </div>

  <!-- TEAM SELECTION SCREEN -->
  <div id="team-screen" class="screen">
    <h2>Select Your Team</h2>
    <div class="teams">
      <div class="team" data-team="RCB"><img src="250px-Royal_Challengers_Bengaluru_Logo.svg.png" alt="RCB" /><p>RCB</p></div>
      <div class="team" data-team="CSK"><img src="chennai-super-kings3461.jpg" alt="CSK" /><p>CSK</p></div>
      <div class="team" data-team="KKR"><img src="778px-Kolkata_Knight_Riders_Logo.svg.png" alt="KKR" /><p>KKR</p></div>
      <div class="team" data-team="MI"><img src="1200px-Mumbai_Indians_Logo.svg (1).png" alt="MI" /><p>MI</p></div>
      <div class="team" data-team="LSG"><img src="1200px-Lucknow_Super_Giants_IPL_Logo.svg (1).png" alt="LSG" /><p>LSG</p></div>
      <div class="team" data-team="SRH"><img src="627d11598a632ca996477eb0.png" alt="SRH" /><p>SRH</p></div>
      <div class="team" data-team="GT"><img src="627d09228a632ca996477e87 (1).png" alt="GT" /><p>GT</p></div>
      <div class="team" data-team="PBKS"><img src="Punjab_Kings_Logo.svg.png" alt="PBKS" /><p>PBKS</p></div>
    </div>
  </div>

  <!-- DASHBOARD -->
  <div id="dashboard" class="screen">
    <div class="welcome-section">
      <img id="team-logo" class="team-logo" alt="Team Logo" />
      <h2>Welcome to Class Premier League!</h2>
      <h3 id="thanks-text"></h3>
      <p id="selected-team-name"></p>
    </div>
    <div class="credits">
      <p>Created by Divyansh & ChatGPT â¤ï¸</p>
    </div>
  </div>

  <!-- OTHER SCREENS -->
  <div id="auction" class="screen"><h2>Auction Room</h2></div>
  <div id="squad" class="screen"><h2>Manage Squad</h2></div>
  <div id="schedule" class="screen"><h2>Match Schedule</h2></div>
  <div id="points" class="screen"><h2>Points Table</h2></div>
  <div id="caps" class="screen"><h2>Caps & Awards</h2></div>
  <div id="stats" class="screen"><h2>Stats</h2></div>
  <div id="rules" class="screen"><h2>Rules</h2></div>

  <!-- BOTTOM NAVIGATION BAR -->
  <div id="bottom-nav" class="bottom-nav hidden">
    <button class="nav-btn" data-target="dashboard">ğŸ </button>
    <button class="nav-btn" data-target="auction">ğŸ’°</button>
    <button class="nav-btn" data-target="squad">ğŸ‘¤</button>
    <button class="nav-btn" data-target="schedule">ğŸ“…</button>
    <button class="nav-btn" data-target="points">ğŸ“ˆ</button>
    <button class="nav-btn" data-target="caps">ğŸ§¢</button>
    <button class="nav-btn" data-target="stats">ğŸ“Š</button>
    <button class="nav-btn" data-target="rules">ğŸ“œ</button>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-app.js";
    import { getDatabase, ref, set, get, update } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-database.js";
    import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-auth.js";

    // Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyCdpxNsLzKNeZ9MhQqU_T_oLdg-hCoXzSk",
      authDomain: "class-premier-league.firebaseapp.com",
      projectId: "class-premier-league",
      storageBucket: "class-premier-league.firebasestorage.app",
      messagingSenderId: "59210532535",
      appId: "1:59210532535:web:4558b69e94949b65cc6f32"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    const auth = getAuth();

    const loginScreen = document.getElementById("login-screen");
    const teamScreen = document.getElementById("team-screen");
    const dashboard = document.getElementById("dashboard");
    const bottomNav = document.getElementById("bottom-nav");
    const loginMsg = document.getElementById("login-message");

    // âœ… SIGNUP
    document.getElementById("signupBtn").addEventListener("click", async () => {
      const name = document.getElementById("name").value.trim();
      const email = document.getElementById("email").value.trim();
      const password = document.getElementById("password").value.trim();

      if (!name || !email || !password) {
        loginMsg.textContent = "Please fill all fields!";
        return;
      }

      try {
        const userCredential = await createUserWithEmailAndPassword(auth, email, password);
        const user = userCredential.user;

        await set(ref(db, "users/" + user.uid), {
          name: name,
          email: email,
          team: "",
          createdAt: new Date().toISOString()
        });

        loginMsg.textContent = "âœ… Signup successful! Please Login.";
      } catch (error) {
        loginMsg.textContent = "âŒ " + error.message;
      }
    });

    // âœ… LOGIN
    document.getElementById("loginBtn").addEventListener("click", async () => {
      const email = document.getElementById("email").value.trim();
      const password = document.getElementById("password").value.trim();

      if (!email || !password) {
        loginMsg.textContent = "Please enter email & password!";
        return;
      }

      try {
        const userCredential = await signInWithEmailAndPassword(auth, email, password);
        const user = userCredential.user;

        const snapshot = await get(ref(db, "users/" + user.uid));
        if (snapshot.exists()) {
          const data = snapshot.val();
          if (data.team && data.team !== "") {
            showDashboard(data.name, data.team);
          } else {
            showTeamSelection(data.name, user.uid);
          }
        }
      } catch (error) {
        loginMsg.textContent = "âŒ " + error.message;
      }
    });

    // âœ… TEAM SELECTION
    function showTeamSelection(name, uid) {
      loginScreen.classList.remove("active");
      teamScreen.classList.add("active");

      document.querySelectorAll(".team").forEach((t) => {
        t.onclick = async () => {
          const selectedTeam = t.dataset.team;
          await update(ref(db, "users/" + uid), { team: selectedTeam });
          showDashboard(name, selectedTeam);
        };
      });
    }

    // âœ… DASHBOARD
    function showDashboard(name, team) {
      teamScreen.classList.remove("active");
      dashboard.classList.add("active");
      bottomNav.classList.remove("hidden");

      const logo = document.querySelector(`[data-team='${team}'] img`).src;
      document.getElementById("team-logo").src = logo;
      document.getElementById("thanks-text").textContent = `Thanks for joining us, ${name}!`;
      document.getElementById("selected-team-name").textContent = `Your team: ${team}`;
    }

    // âœ… NAVIGATION
    document.querySelectorAll(".nav-btn").forEach((btn) => {
      btn.addEventListener("click", () => {
        const target = btn.dataset.target;
        document.querySelectorAll(".screen").forEach((scr) => scr.classList.remove("active"));
        document.getElementById(target).classList.add("active");
      });
    });
  </script>
</body>
</html>
